(this.webpackJsonpcarauto=this.webpackJsonpcarauto||[]).push([[0],{12:function(t,e,o){},17:function(t,e,o){},18:function(t,e,o){"use strict";o.r(e);var n=o(1),l=o.n(n),r=o(3),c=o.n(r),i=(o(12),o(2)),a=function(){return Object(i.b)()},s=(i.c,o(4)),d=null;var h=Object(s.b)({name:"directionController",initialState:{controllerData:{left:{x:0,y:0,xGap:0,yGap:0,moving:!1},right:{x:0,y:0,xGap:0,yGap:0,moving:!1}},controllerRateConfig:{left_UD:100,left_LR:100,right_UD:100,right_LR:100,A:100,B:100},min:0,max:300,switchA:0,switchB:0,controllerSwith:!1,socketServer:"ws://192.168.5.1:81",socketServerObj:null},reducers:{setConfigMaxMin:function(t,e){t.min=e.payload.x,t.max=e.payload.y},setDirection:function(t,e){t.controllerData[e.payload.controllerId]?(t.controllerData[e.payload.controllerId].x=e.payload.x,t.controllerData[e.payload.controllerId].y=e.payload.y,t.controllerData[e.payload.controllerId].xGap=e.payload.xGap,t.controllerData[e.payload.controllerId].yGap=e.payload.yGap,t.controllerData[e.payload.controllerId].moving=e.payload.moving):t.controllerData[e.payload.controllerId]={x:e.payload.x,y:e.payload.y,xGap:e.payload.xGap,yGap:e.payload.yGap,moving:e.payload.moving}},sendData:function(t){!function(t){var e=t.controllerData.left.x,o=t.controllerData.left.y,n=t.controllerData.right.x,l=t.controllerData.right.y,r=t.switchA,c=t.switchB;t.controllerRateConfig.LEFT_UD<100&&(o=(t.controllerData.left.y-t.max/2)*t.controllerRateConfig.LEFT_UD/100+t.max/2),t.controllerRateConfig.left_LR<100&&(e=(t.controllerData.left.x-t.max/2)*t.controllerRateConfig.left_LR/100+t.max/2),t.controllerRateConfig.right_UD<100&&(l=(t.controllerData.right.y-t.max/2)*t.controllerRateConfig.right_UD/100+t.max/2),t.controllerRateConfig.right_LR<100&&(n=(t.controllerData.right.x-t.max/2)*t.controllerRateConfig.right_LR/100+t.max/2),t.controllerRateConfig.A<100&&(r=(t.switchA-t.max/2)*t.controllerRateConfig.A/100+t.max/2),t.controllerRateConfig.A<100&&(c=(t.switchB-t.max/2)*t.controllerRateConfig.B/100+t.max/2);var i={command:"setController",clientType:"controller",data:{controllerData:{left_UD:(t.max-o)/t.max*250,left_LR:e/t.max*250,right_UD:(t.max-l)/t.max*250,right_LR:n/t.max*250,A:r,B:c}}};try{d.send(JSON.stringify(i))}catch(a){}}(t)},togglePowerStatus:function(t){if(t.controllerSwith=!t.controllerSwith,t.controllerSwith)null==d&&((d=new WebSocket(t.socketServer)).onopen=function(t){console.log("Connection open ..."),d.send(JSON.stringify({command:"identify",data:{name:"controller"}}))},d.onclose=function(t){console.log("Connection closed.")});else{try{d.close()}catch(e){}d=null}},increaseSwithA:function(t){t.switchA=t.switchA+1},increaseSwithB:function(t){t.switchB=t.switchB+1},decreaseSwithA:function(t){0!==t.switchA&&(t.switchA=t.switchA-1)},decreaseSwithB:function(t){0!==t.switchB&&(t.switchB=t.switchB-1)},changeSocketServer:function(t,e){t.socketServer=e.payload.socketServer},setConfigRateData:function(t,e){t.controllerRateConfig=e.payload}},extraReducers:function(t){}}),u=h.actions,f=u.setConfigRateData,x=u.setConfigMaxMin,j=u.changeSocketServer,b=u.setDirection,g=u.sendData,p=u.togglePowerStatus,v=u.increaseSwithA,y=u.increaseSwithB,m=u.decreaseSwithA,C=u.decreaseSwithB,O=function(t){return{directionController:t.directionController.controllerData}},w=function(t){return t.directionController.controllerSwith},I=function(t){return t.directionController.switchA},D=function(t){return t.directionController.switchB},R=function(t){return t.directionController.socketServer},S=function(t){return t.directionController.controllerRateConfig},k=h.reducer,A=o(0);function _(t,e){for(var o=t.touches,n=0;n<o.length;n++){if(e===o[n].target.getAttribute("data-controller_id"))return{x:o[n].clientX,y:o[n].clientY,controllerId:e}}}var B,N=function(t){var e=document.body.clientHeight/2,o=e/3,n=(e-o)/2,l=n,r=n,c=a(),s=Object(i.c)(O);return c(x({x:0,y:e-o,controllerId:null,xGap:0,yGap:0,moving:!1})),Object(A.jsxs)("div",{className:"directionController",style:{width:e,height:e,borderRadius:e/2},children:[Object(A.jsx)("div",{className:"controllerBackground"}),Object(A.jsx)("div",{className:"controller","data-controller_id":t.controllerId,style:{width:o-2,height:o-2,borderRadius:o/2,top:null!=s.directionController[t.controllerId].moving&&s.directionController[t.controllerId].moving&&s.directionController[t.controllerId]?s.directionController[t.controllerId].y:n,left:null!=s.directionController[t.controllerId].moving&&s.directionController[t.controllerId].moving&&s.directionController[t.controllerId]?s.directionController[t.controllerId].x:n},onTouchStart:function(e){var o=_(e,t.controllerId),l=o.x,r=o.y;c(b({x:n,y:n,controllerId:t.controllerId,xGap:l-n,yGap:r-n,moving:!0}))},onTouchEnd:function(e){c(b({x:n,y:n,controllerId:t.controllerId,xGap:0,yGap:0,moving:!1}))},onTouchMove:function(e){var o=_(e,t.controllerId),i=s.directionController[t.controllerId].xGap,a=s.directionController[t.controllerId].yGap,d=s.directionController[t.controllerId].moving;l=o.x-i,r=o.y-a;var h=l-n,u=r-n;h=Math.abs(h),u=Math.abs(u);var f=Math.sqrt(h*h+u*u);if(f<=n)c(b({x:l,y:r,controllerId:t.controllerId,xGap:i,yGap:a,moving:d}));else{var x=f/n,j=h/x,g=u/x;l>n?j+=n:j=-j+n,r>n?g+=n:g=-g+n,c(b({x:j,y:g,controllerId:t.controllerId,xGap:i,yGap:a,moving:d}))}}})]})};o(17);var G=function(){var t=a(),e=Object(i.c)(w),o=Object(i.c)(I),n=Object(i.c)(D),l=Object(i.c)(R),r=Object(i.c)(S),c=function(){var t=document.querySelectorAll(".rateConfig input"),e={};for(var o in t){var n=t[o];if(n&&n.getAttribute){var l=n.getAttribute("name"),c=n.value,i=parseFloat(c);e[l]=i>0&&i<=100||""===c?c:r[l]}}return e};return e&&(B&&clearInterval(B),B=setInterval((function(){t(g())}),100)),Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)("div",{style:{left:"calc(100vw / 2 - 25px)",top:30,position:"absolute",display:"inline-block"},children:Object(A.jsx)("div",{className:"power"+(e?" on":" off"),onClick:function(e){t(p())},children:e?"ON":"OFF"})}),Object(A.jsx)("div",{style:{left:"calc(100vw / 2 - 100px)",top:80,position:"absolute",display:e?"none":"inline-block"},children:Object(A.jsx)("input",{onChange:function(e){t(j({socketServer:e.currentTarget.value}))},style:{width:200,border:"1px solid black",height:30,fontSize:"1.2rem",textAlign:"center"},value:l})}),Object(A.jsxs)("div",{className:"rateConfig",style:{display:e?"none":"flex"},children:[Object(A.jsxs)("div",{className:"rateConfigItem",children:[Object(A.jsx)("label",{children:"Left UP-Down"}),Object(A.jsx)("input",{name:"left_UD",value:r.left_UD,onChange:function(){t(f(c()))}}),"\xa0%"]}),Object(A.jsxs)("div",{className:"rateConfigItem",children:[Object(A.jsx)("label",{children:"Right UP-Down"}),Object(A.jsx)("input",{name:"right_UD",value:r.right_UD,onChange:function(){t(f(c()))}}),"\xa0%"]}),Object(A.jsxs)("div",{className:"rateConfigItem",children:[Object(A.jsx)("label",{children:"Left Left-Right"}),Object(A.jsx)("input",{name:"left_LR",value:r.left_LR,onChange:function(){t(f(c()))}}),"\xa0%"]}),Object(A.jsxs)("div",{className:"rateConfigItem",children:[Object(A.jsx)("label",{children:"Right Left-Right"}),Object(A.jsx)("input",{name:"right_LR",value:r.right_LR,onChange:function(){t(f(c()))}}),"\xa0%"]}),Object(A.jsxs)("div",{className:"rateConfigItem",children:[Object(A.jsx)("label",{children:"Switch A"}),Object(A.jsx)("input",{name:"A",value:r.A,onChange:function(){t(f(c()))}}),"\xa0%"]}),Object(A.jsxs)("div",{className:"rateConfigItem",children:[Object(A.jsx)("label",{children:"Switch B"}),Object(A.jsx)("input",{name:"B",value:r.B,onChange:function(){t(f(c()))}}),"\xa0%"]})]}),Object(A.jsxs)("div",{style:{display:e?"block":"none"},children:[Object(A.jsx)("div",{style:{left:50,top:30,position:"absolute",display:"inline-block"},children:Object(A.jsx)(N,{controllerId:"left"})}),Object(A.jsx)("div",{style:{right:50,top:30,position:"absolute",display:"inline-block"},children:Object(A.jsx)(N,{controllerId:"right"})}),Object(A.jsx)("div",{style:{left:80,bottom:15,position:"absolute",display:"inline-block"},children:Object(A.jsxs)("div",{className:"swither",children:[Object(A.jsx)("div",{className:"data",children:o}),Object(A.jsxs)("div",{className:"buttons",children:[Object(A.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)"},onClick:function(){t(m())},children:" - "}),Object(A.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)",borderLeft:"1px solid black"},onClick:function(){t(v())},children:" + "})]})]})}),Object(A.jsx)("div",{style:{right:80,bottom:15,position:"absolute",display:"inline-block"},children:Object(A.jsxs)("div",{className:"swither",children:[Object(A.jsx)("div",{className:"data",children:n}),Object(A.jsxs)("div",{className:"buttons",children:[Object(A.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)"},onClick:function(){t(C())},children:" - "}),Object(A.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)",borderLeft:"1px solid black"},onClick:function(){t(y())},children:" + "})]})]})}),Object(A.jsx)("div",{style:{position:"absolute",left:250,top:80},children:Object(A.jsx)("div",{id:"console",style:{height:200,width:280,overflow:"auto"}})})]})]})},L=Object(s.a)({reducer:{direction:k,directionController:k}});c.a.render(Object(A.jsx)(l.a.StrictMode,{children:Object(A.jsx)(i.a,{store:L,children:Object(A.jsx)(G,{})})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.777f5132.chunk.js.map