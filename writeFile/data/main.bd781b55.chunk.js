(this.webpackJsonpcarauto=this.webpackJsonpcarauto||[]).push([[0],{12:function(t,e,o){},17:function(t,e,o){},18:function(t,e,o){"use strict";o.r(e);var c=o(0),n=o.n(c),r=o(3),l=o.n(r),i=(o(12),o(2)),s=function(){return Object(i.b)()},a=(i.c,o(4)),d=null;var h=Object(a.b)({name:"directionController",initialState:{controllerData:{left:{x:0,y:0},right:{x:0,y:0}},min:0,max:300,switchA:0,switchB:0,controllerSwith:!1,socketServer:"ws://192.168.5.1:81",socketServerObj:null},reducers:{setDirection:function(t,e){t.controllerData[e.payload.controllerId]?(t.controllerData[e.payload.controllerId].x=e.payload.x,t.controllerData[e.payload.controllerId].y=e.payload.y):t.controllerData[e.payload.controllerId]={x:e.payload.x,y:e.payload.y}},sendData:function(t){!function(t){var e={command:"setController",clientType:"controller",data:{controllerData:{left_UD:t.controllerData.left.y,left_LR:t.controllerData.left.x,right_UD:t.controllerData.right.x,right_LR:t.controllerData.right.y,A:t.switchA,B:t.switchB}}};try{d.send(JSON.stringify(e))}catch(o){}}(t)},togglePowerStatus:function(t){if(t.controllerSwith=!t.controllerSwith,t.controllerSwith)null==d&&((d=new WebSocket(t.socketServer)).onopen=function(t){console.log("Connection open ..."),d.send(JSON.stringify({command:"identify",data:{name:"controller"}}))},d.onclose=function(t){console.log("Connection closed.")});else{try{d.close()}catch(e){}d=null}},increaseSwithA:function(t){t.switchA=t.switchA+1},increaseSwithB:function(t){t.switchB=t.switchB+1},decreaseSwithA:function(t){0!==t.switchA&&(t.switchA=t.switchA-1)},decreaseSwithB:function(t){0!==t.switchB&&(t.switchB=t.switchB-1)},changeSocketServer:function(t,e){t.socketServer=e.payload.socketServer}},extraReducers:function(t){}}),u=h.actions,b=u.changeSocketServer,j=u.setDirection,f=u.sendData,w=u.togglePowerStatus,y=u.increaseSwithA,v=u.increaseSwithB,x=u.decreaseSwithA,p=u.decreaseSwithB,O=function(t){return{directionController:t.directionController.controllerData}},S=function(t){return t.directionController.controllerSwith},g=function(t){return t.directionController.switchA},m=function(t){return t.directionController.switchB},k=function(t){return t.directionController.socketServer},C=h.reducer,B=o(1),I=0,N=0,D=!1;var A,M=function(t){var e=document.body.clientHeight/2,o=e/3,c=(e-o)/2,n=c,r=c,l=s(),a=Object(i.c)(O);return Object(B.jsxs)("div",{className:"directionController",style:{width:e,height:e,borderRadius:e/2},children:[Object(B.jsx)("div",{className:"controllerBackground"}),Object(B.jsx)("div",{className:"controller",style:{width:o-2,height:o-2,borderRadius:o/2,top:D&&a.directionController[t.controllerId]?a.directionController[t.controllerId].y:c,left:D&&a.directionController[t.controllerId]?a.directionController[t.controllerId].x:c},onTouchStart:function(t){var e=t.touches[0].clientX,o=t.touches[0].clientY;I=e-c,N=o-c,D=!0},onTouchEnd:function(e){I=0,N=0,D=!1,l(j({x:c,y:c,controllerId:t.controllerId}))},onTouchMove:function(e){n=e.touches[0].clientX-I,r=e.touches[0].clientY-N;var o=n-c,i=r-c;o=Math.abs(o),i=Math.abs(i);var s=Math.sqrt(o*o+i*i);if(s<=c)l(j({x:n,y:r,controllerId:t.controllerId}));else{var a=s/c,d=o/a,h=i/a;n>c?d+=c:d=-d+c,r>c?h+=c:h=-h+c,l(j({x:d,y:h,controllerId:t.controllerId}))}}})]})};o(17);var R=function(){var t=s(),e=Object(i.c)(S),o=Object(i.c)(g),c=Object(i.c)(m),n=Object(i.c)(k);return e&&(A&&clearInterval(A),A=setInterval((function(){t(f())}),100)),Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)("div",{style:{left:"calc(100vw / 2 - 25px)",top:30,position:"absolute",display:"inline-block"},children:Object(B.jsx)("div",{className:"power"+(e?" on":" off"),onClick:function(e){t(w())},children:e?"ON":"OFF"})}),Object(B.jsx)("div",{style:{left:"calc(100vw / 2 - 100px)",top:80,position:"absolute",display:e?"none":"inline-block"},children:Object(B.jsx)("input",{onChange:function(e){t(b({socketServer:e.currentTarget.value}))},style:{width:200,border:"1px solid black",height:30,fontSize:"1.2rem",textAlign:"center"},value:n})}),Object(B.jsxs)("div",{style:{display:e?"block":"none"},children:[Object(B.jsx)("div",{style:{left:50,top:30,position:"absolute",display:"inline-block"},children:Object(B.jsx)(M,{controllerId:"left"})}),Object(B.jsx)("div",{style:{right:50,top:30,position:"absolute",display:"inline-block"},children:Object(B.jsx)(M,{controllerId:"right"})}),Object(B.jsx)("div",{style:{left:80,bottom:30,position:"absolute",display:"inline-block"},children:Object(B.jsxs)("div",{className:"swither",children:[Object(B.jsx)("div",{className:"data",children:o}),Object(B.jsxs)("div",{className:"buttons",children:[Object(B.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)"},onClick:function(){t(x())},children:" - "}),Object(B.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)",borderLeft:"1px solid black"},onClick:function(){t(y())},children:" + "})]})]})}),Object(B.jsx)("div",{style:{right:80,bottom:30,position:"absolute",display:"inline-block"},children:Object(B.jsxs)("div",{className:"swither",children:[Object(B.jsx)("div",{className:"data",children:c}),Object(B.jsxs)("div",{className:"buttons",children:[Object(B.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)"},onClick:function(){t(p())},children:" - "}),Object(B.jsx)("div",{className:"switcherButton",style:{height:"100%",width:"calc(100% / 2)",borderLeft:"1px solid black"},onClick:function(){t(v())},children:" + "})]})]})})]})]})},T=Object(a.a)({reducer:{direction:C,directionController:C}});l.a.render(Object(B.jsx)(n.a.StrictMode,{children:Object(B.jsx)(i.a,{store:T,children:Object(B.jsx)(R,{})})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.bd781b55.chunk.js.map